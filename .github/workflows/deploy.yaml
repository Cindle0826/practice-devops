# 事件
on:
  push

# 工作
jobs:
  ci:
    name: build java project
    runs-on: ubuntu-latest
    steps:
      - name: fetch branch content
        uses: actions/checkout@v4

      - name: install java
        uses: actions/setup-java@v4
        with:
          distribution: 'zulu'
          java-version: '17'

      - name: check java version
        run: java -version

      - name: check current directory
        run: ls -la

      - name: check gradle version
        run: gradle -version

      - name: check gradlew version
        run: sudo gradlew --version

      - name: build with gradle
        run: sudo ./gradlew build

      - name: build with Spring Boot
        run: sudo ./gradle bootJar

      - name: run Spring Boot app
        run: sudo ./gradle bootRun


